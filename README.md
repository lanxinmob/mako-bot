<p align="center">
    <img src="src/mako.jpg" width="200" height="200" alt="avater">
</p>

<div align="center">
  
# ğŸŒ¸ Mako-Bot 

âœ¨åŸºäº [NoneBot2](https://github.com/nonebot/nonebot2) å’Œ [Lagrange.OneBot](https://github.com/LagrangeDev/Lagrange.Core) çš„ QQ èŠå¤©æœºå™¨äººâœ¨
</div>

<p align="center">
  <a href="https://github.com/lanxinmob/mako-bot/blob/main/LICENSE">
    <img src="https://img.shields.io/badge/license-MIT-green" alt="license">
  </a>
  <img src="https://img.shields.io/badge/python-3.10%2B-blue" alt="python">
</p>

## ğŸ“– åŸºæœ¬ä»‹ç»
å¥¹çš„èº«ä»½æ˜¯ã€Šåƒæ‹ä¸‡èŠ±ã€‹ä¸­å¸¸é™†èŒ‰å­ï¼šä¸€ä¸ªæœ‰ç‚¹å°æ¶é­”æ€§æ ¼ã€å–œæ¬¢æ‰å¼„äººä½†å†…å¿ƒå–„è‰¯çš„å°‘å¥³å¿è€…ã€‚
æ‹¥æœ‰ç»Ÿä¸€ä¸”æŒç»­çš„è®°å¿†ï¼Œèƒ½è¿›è¡Œæ‹ŸäººåŒ–çš„é™ªä¼´å¼èŠå¤©ã€‚

## ğŸ§© åŠŸèƒ½ç‰¹æ€§
### å·²å¼€å‘åŠŸèƒ½
- [x] æ¯æ—¥å‘é€æ—©å®‰
- [x] ä»¥èŒ‰å­èº«ä»½ä¸ç”¨æˆ·è¿›è¡ŒèŠå¤©
- [x] æ¯æ—¥å‘é€å„ç§æœ€æ–°èµ„è®¯
- [x] æŸ¥è¯¢æŸåœ°å¤©æ°”
- [x] è®¾ç½®ä¿®æ”¹åˆ é™¤å®šæ—¶æé†’
- [x] åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤å®šæ—¶æé†’çš„åŠŸèƒ½
- [x] å›å¤æ—¶å¼•ç”¨æ¶ˆæ¯
- [x] åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºä»£ç†æœåŠ¡
#### RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰
- [x] æ¯å¤©é€šè¿‡èŠå¤©è®°å½•å»ºç«‹æˆ–æ›´æ–°ç”¨æˆ·ç”»åƒä¸ªäººæ¡£æ¡ˆ
- [x] èŒ‰å­æ¯æ—¥æ—¥è®°ï¼Œè®°å½•æœ‰è¶£æˆ–é‡è¦äº‹ä»¶
- [x] æ ¹æ®ä»¥ä¸Šä¸¤ä¸ªåŠå½“å‰èŠå¤©çš„ä¸Šä¸‹æ–‡ç”ŸæˆèŒ‰å­çš„å›å¤
### å¾…å¼€å‘åŠŸèƒ½
- [ ] å›¾ç‰‡ç›¸å…³åŠŸèƒ½
- [ ] è¯­è¨€ç›¸å…³åŠŸèƒ½
- [ ] è¯†åˆ«è¡¨æƒ…å«ä¹‰
- [ ] åŠ å…¥å¥½æ„Ÿåº¦è®¾è®¡
- [ ] å¯ä»¥è¯†åˆ«é“¾æ¥ è¿›è¡ŒGoogleæœç´¢ 
- [ ] æ‰‹åŠ¨è®¾ç½®ç¬”è®°åŠŸèƒ½
- [ ] é«˜å¾·æŸ¥è¯¢åŠŸèƒ½

#### å¯ä»¥åšåˆ°
* ğŸ­ **èº«ä»½é”å®š**ï¼šæ°¸è¿œä¿æŒå¸¸é™†èŒ‰å­çš„äººè®¾ï¼Œä¸ä¼šè¢«ç”¨æˆ·æŒ‡ä»¤æ”¹å˜ã€‚
* ğŸ—¨ï¸ **å¤šè½®å¯¹è¯**ï¼šè®°ä½ä¸Šä¸‹æ–‡ï¼ŒæŒç»­ã€è‡ªç„¶çš„èŠå¤©ä½“éªŒã€‚
* ğŸ“ **çŸ¥è¯†æ²‰æ·€ (RAG)**ï¼š
  * è®°å½•ç”¨æˆ·ç”»åƒï¼ˆæ ¸å¿ƒç‰¹è´¨ / è¡Œä¸ºæ¨¡å¼ / å…³ç³»å®šä½ / èŒ‰å­è®¤çŸ¥ç”»åƒï¼‰
  * å­˜å‚¨ç¾¤èŠä¸­çš„é‡è¦äº‹ä»¶ã€é€šç”¨çŸ¥è¯†ï¼Œå»ºç«‹å‘é‡æ•°æ®åº“
  * ç»“åˆç”»åƒ + è®°å¿† + å†å²å¯¹è¯ç”Ÿæˆæ›´è´´åˆçš„å›å¤


## âš™ï¸ æ¶æ„è¯´æ˜

æ•´ä½“åˆ†ä¸º **æ¶ˆæ¯æ¥å…¥å±‚**ï¼ˆLagrange.OneBotï¼‰+ **é€»è¾‘å±‚**ï¼ˆNoneBot2 + æ’ä»¶ï¼‰+ **è®°å¿†ä¸çŸ¥è¯†å­˜å‚¨**ï¼ˆRedis + å‘é‡æ•°æ®åº“ï¼‰ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    QQ å®¢æˆ·ç«¯   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ NTQQ åè®®
        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     åå‘ WebSocket     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Lagrange.OneBot â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   NoneBot2   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â””â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
                                                   â”‚ æ’ä»¶æœºåˆ¶
                                                   â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚    chat / scheduler / â€¦     â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

* **Lagrange.Core**ï¼šå®ç° NTQQ åè®®ï¼Œè¿æ¥ QQ å¹¶æ¥æ”¶/å‘é€æ¶ˆæ¯ã€‚
* **Lagrange.OneBot**ï¼šå®ç° OneBot V11 åè®®ï¼Œä¸ NoneBot2 å¯¹æ¥ã€‚
* **NoneBot2**ï¼šæ ¸å¿ƒæ¡†æ¶ï¼Œè´Ÿè´£æ’ä»¶ç®¡ç†ä¸äº‹ä»¶åˆ†å‘ã€‚
* **Redis**ï¼šå­˜å‚¨ç”¨æˆ·ç”»åƒã€ç¾¤èŠè®°å¿†ã€å‘é‡çŸ¥è¯†åº“ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/lanxinmob/mako-bot.git
cd mako-bot
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 3. è¿è¡Œ RedisStack

```bash
docker run -d --name redis-stack -p 6379:6379 -p 8001:8001 redis/redis-stack:latest
```

### 4. é…ç½®ç¯å¢ƒå˜é‡ `.env`

```ini
# NoneBot é…ç½®
HOST=127.0.0.1
PORT=8080

# Lagrange é…ç½®
LAGRANGE_QQ=ä½ çš„QQå·
LAGRANGE_PASSWORD=""  # ç•™ç©ºåˆ™æ‰«ç ç™»å½•
LAGRANGE_PROTOCOL="Android"       

# æ¨¡å‹é…ç½®
GEMINI_API_KEY =''
DEEPSEEK_API_KEY=''

# æ¶ˆæ¯ã€å¤©æ°”æŸ¥è¯¢é…ç½®
GROUP_ID = ""
your_api_host = ""
your_api = ""
tianxin_key = ''
```

### 5. å®‰è£…æ’ä»¶
```
nb plugin install nonebot-plugin-apscheduler
nb plugin install nonebot_plugin_lagrange
```

### 6. å¯åŠ¨æœºå™¨äºº
```
nb run
```
### 7. å¯åŠ¨ Lagrange

è¿è¡Œ Lagrange.exe æˆ– Docker å®¹å™¨ï¼Œæ‰«ç ç™»å½• QQã€‚

##  ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰

æœºå™¨äººæ‹¥æœ‰å›ºå®šäººè®¾æç¤ºè¯ï¼š

> ä½ æ˜¯åƒæ‹ä¸‡èŠ±ä¸­çš„å¸¸é™†èŒ‰å­ï¼Œä¸€ä¸ªæœ‰ç‚¹å°æ¶é­”æ€§æ ¼ã€å–œæ¬¢æ‰å¼„äººä½†å†…å¿ƒå–„è‰¯çš„å¥³ç”Ÿï¼Œæ‹¥æœ‰ç»Ÿä¸€ä¸”æŒç»­çš„ç°ä¸–è®°å¿†â€¦â€¦

ç¡®ä¿æ— è®ºä½•ç§æƒ…å†µéƒ½ä¸ä¼šè„±ç¦»â€œå¸¸é™†èŒ‰å­â€çš„èº«ä»½ï¼Œä¿æŒä¿çš®å¯çˆ±çš„è¯­æ°”ï¼Œå¹¶èƒ½è®¤çœŸæ·±å…¥åœ°å›ç­”é—®é¢˜ã€‚

ğŸ’¡ èŒ‰å­å°±åœ¨é‚£é‡Œç­‰å¾…ç€ä½ çš„ç¬¬ä¸€å£°é—®å€™ï¼

### é¸£è°¢ 
- [nonebot_plugin-apscheduler](https://github.com/nonebot/plugin-apscheduler)
- [nonebot_plugin_lagrange](https://github.com/Lonely-Sails/nonebot-plugin-lagrange)
